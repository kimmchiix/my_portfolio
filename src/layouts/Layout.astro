
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="stylesheet" href="src/style/global.css" />
		<link rel="stylesheet" href="src/style/scroll.css" />
     <link rel="stylesheet" href="/src/style/fade.css" />
		<meta name="generator" content={Astro.generator} />
		<title>Kim Loreen - Portfolio</title>
	</head>
	<div class="cursor"></div>
	<body>

		<slot />

	</body>
</html>

<style>
	@import url('https://fonts.googleapis.com/css2?family=Instrument+Sans:ital,wght@0,400..700;1,400..700&family=Instrument+Serif:ital@0;1&display=swap');
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
.cursor {
  position: fixed;
  top: 0;
  left: 0;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-color: #B10F37;
  pointer-events: none;
  transform: translate(-50%, -50%);
  transition: width 0.25s ease, height 0.25s ease, background-color 0.25s ease, border 0.25s ease;
  z-index: 9999;
}

.cursor.hover {
  width: 50px;
  height: 50px;
  background-color: transparent;
  background-color: #B10F37;
  border: 2px solid #B10F37;
}
  @media (hover: none) and (pointer: coarse) {
  .cursor {
    display: none;
  }
}
</style>

<script>
  const cursorEl = document.querySelector(".cursor");

  if (cursorEl instanceof HTMLElement) {
    const cursor: HTMLElement = cursorEl; 

    let mouseX = 0, mouseY = 0;
    let currentX = 0, currentY = 0;

    // Track mouse
    document.addEventListener("mousemove", (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    // Animate delayed movement
    function animate() {
      currentX += (mouseX - currentX) * 0.15;
      currentY += (mouseY - currentY) * 0.15;

    
      cursor.style.transform = `translate(${currentX}px, ${currentY}px)`;

      requestAnimationFrame(animate);
    }

    animate();

    // Hover state for clickable elements
    const hoverables = document.querySelectorAll("a, button, [data-cursor='hover']");
    hoverables.forEach((el) => {
      el.addEventListener("mouseenter", () => cursor.classList.add("hover"));
      el.addEventListener("mouseleave", () => cursor.classList.remove("hover"));
    });
  } else {
    console.warn("Cursor element not found");
  }

  // Fade-up observer
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          observer.unobserve(entry.target); // only once
        }
      });
    },
    { threshold: 0.3 }
  );

  document.querySelectorAll(".fade-up").forEach((el) => observer.observe(el));
</script>